{% extends 'store/base.html' %}
{% block content %}

<h2 class="mb-4">ðŸ›’ Your Cart</h2>

{% if items %}

<table class="table align-middle">
  <thead>
    <tr>
      <th>Plant</th>
      <th>Price</th>
      <th>Quantity</th>
      <th>Subtotal</th>
      <th></th>
    </tr>
  </thead>

  <tbody>
  {% for item in items %}
    <tr>

      <!-- PLANT NAME -->
      <td>
        <strong>{{ item.plant.name }}</strong>
      </td>

      <!-- PRICE -->
      <td>â‚¹{{ item.plant.price }}</td>

      <!-- QTY -->
      <td>{{ item.quantity }}</td>

      <!-- SUBTOTAL (FIXED) -->
      <td>
        â‚¹{{ item.plant.price }} Ã— {{ item.quantity }}
        <br>
        <strong>â‚¹{{ item.subtotal }}</strong>
      </td>

      <!-- REMOVE -->
      <td>
        <form method="post" action="{% url 'remove_from_cart' item.plant.id %}">
          {% csrf_token %}
          <button class="btn btn-sm btn-danger">Remove</button>
        </form>
      </td>

    </tr>
  {% endfor %}
  </tbody>
</table>

<div class="text-end">
  <h4>Total: â‚¹{{ total }}</h4>

  <a href="/checkout/" class="btn btn-success btn-lg mt-2">
    Proceed to Checkout
  </a>
</div>

{% else %}
  <div class="text-center mt-5">
    <h4>Your cart is empty</h4>
    <a href="/" class="btn btn-success mt-3">Shop Plants</a>
  </div>
{% endif %}

{% endblock %}
